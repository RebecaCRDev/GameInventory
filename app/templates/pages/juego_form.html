<!-- app/templates/pages/juego_form.html -->
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      {% if modo == "nuevo" %}Nuevo Videojuego{% else %}Editar Videojuego{% endif %} | GameInventory
    </title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="/static/css/style.css" />
    <link rel="icon" href="/static/img/logo.png" />
  </head>

  <body>
    <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="/">
          <img class="logo" src="/static/img/logo.png" alt="logo" />
        </a>
        <div class="ms-auto">
          <a class="btn btn-outline-light btn-sm" href="/">
            <i class="bi bi-arrow-left me-1"></i>Volver
          </a>
        </div>
      </div>
    </nav>

    <main class="pt-5 bg-gradient-blue-green">
      <div class="container">
        <h1 class="text-center mb-4">
          {% if modo == "nuevo" %}Agregar Videojuego{% else %}Editar Videojuego{% endif %}
        </h1>

        {% if error %}
          <div class="alert alert-danger">
            <i class="bi bi-exclamation-triangle me-2"></i>{{ error }}
          </div>
        {% endif %}

        <div class="card shadow-sm">
          <div class="card-body">
            <form
              method="post"
              action="{% if modo == 'nuevo' %}/juegos/nuevo{% else %}/juegos/editar/{{ juego.id }}{% endif %}"
              class="row g-3"
            >
              <div class="col-md-4">
                <label class="form-label">Código (SKU)</label>
                <input
                  type="text"
                  name="codigo"
                  class="form-control"
                  maxlength="50"
                  value="{{ juego.codigo if juego else '' }}"
                  placeholder="SKU-001"
                />
              </div>

              <div class="col-md-8">
                <label class="form-label">Título *</label>
                <input
                  type="text"
                  name="titulo"
                  class="form-control"
                  maxlength="200"
                  required
                  value="{{ juego.titulo if juego else '' }}"
                  placeholder="Elden Ring"
                />
              </div>

              <div class="col-md-4">
                <label class="form-label">Plataforma *</label>
                <input
                  type="text"
                  name="plataforma"
                  class="form-control"
                  maxlength="50"
                  required
                  value="{{ juego.plataforma if juego else '' }}"
                  placeholder="PC / PS5 / Switch..."
                />
              </div>

              <div class="col-md-4">
                <label class="form-label">Género</label>
                <input
                  type="text"
                  name="genero"
                  class="form-control"
                  maxlength="80"
                  value="{{ juego.genero if juego else '' }}"
                  placeholder="RPG / Acción..."
                />
              </div>

              <div class="col-md-2">
                <label class="form-label">Precio (€)</label>
                <input
                  type="number"
                  name="precio"
                  class="form-control"
                  step="0.01"
                  min="0"
                  value="{{ juego.precio if juego else 0 }}"
                />
              </div>

              <div class="col-md-2">
                <label class="form-label">Stock</label>
                <input
                  type="number"
                  name="stock"
                  class="form-control"
                  min="0"
                  value="{{ juego.stock if juego else 0 }}"
                />
              </div>

              <div class="col-md-3">
                <label class="form-label">Estado</label>
                <select name="estado" class="form-select">
                  <option value="1" {% if juego and juego.estado == 1 %}selected{% endif %}>Activo</option>
                  <option value="0" {% if juego and juego.estado == 0 %}selected{% endif %}>Inactivo</option>
                </select>
              </div>

              <div class="col-12 d-flex gap-2">
                <button type="submit" class="btn btn-success">
                  <i class="bi bi-check2-circle me-2"></i>
                  {% if modo == "nuevo" %}Guardar{% else %}Actualizar{% endif %}
                </button>

                <a href="/" class="btn btn-secondary">
                  <i class="bi bi-x-circle me-2"></i>Cancelar
                </a>
              </div>

              <div class="col-12">
                <small class="text-muted">
                  Los campos con * son obligatorios. Precio y stock no pueden ser negativos.
                </small>
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>